{"ast":null,"code":"var _jsxFileName = \"/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/Map.js\";\nimport React, { Component } from 'react';\nimport 'ol/ol.css';\nimport './Map.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport { Stroke, Style, Icon } from 'ol/style.js';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer.js';\nimport OSM from 'ol/source/OSM.js'; // Import OSM source\nimport VectorSource from 'ol/source/Vector.js';\nimport Feature from 'ol/Feature.js';\nimport LineString from 'ol/geom/LineString.js';\nimport { getVectorContext } from 'ol/render.js';\nimport { getWidth } from 'ol/extent.js';\nimport arc from 'arc';\nimport airplaneimg from './614.png';\nconst tileLayer = new TileLayer({\n  source: new OSM() // Use OSM source\n});\n\nconst map = new Map({\n  layers: [tileLayer],\n  target: 'map',\n  // Update target to match the ID of the HTML element\n  view: new View({\n    center: [-11000000, 4600000],\n    zoom: 2\n  })\n});\nconst airplaneIcon = new Icon({\n  src: airplaneimg,\n  // Use the imported image file\n  scale: 0.5 // Scale the size of the icon if needed\n});\n\nconst style = new Style({\n  stroke: new Stroke({\n    color: 'red',\n    width: 2\n  }),\n  image: airplaneIcon // Set the airplane icon as the symbol\n});\n\nconst flightsSource = new VectorSource({\n  attributions: 'Flight data by ' + '<a href=\"https://openflights.org/data.html\">OpenFlights</a>,',\n  loader: function () {\n    const url = '/data/openflights/flights.json'; // Update the URL\n    fetch(url).then(function (response) {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(function (json) {\n      const flightsData = json.flights;\n      for (let i = 0; i < flightsData.length; i++) {\n        const flight = flightsData[i];\n        const from = flight[0];\n        const to = flight[1];\n        const arcGenerator = new arc.GreatCircle({\n          x: from[1],\n          y: from[0]\n        }, {\n          x: to[1],\n          y: to[0]\n        });\n        const arcLine = arcGenerator.Arc(100, {\n          offset: 10\n        });\n        const features = [];\n        arcLine.geometries.forEach(function (geometry) {\n          const line = new LineString(geometry.coords);\n          line.transform('EPSG:4326', 'EPSG:3857');\n          features.push(new Feature({\n            geometry: line,\n            finished: false\n          }));\n        });\n        addLater(features, i * 50);\n      }\n      tileLayer.on('postrender', animateFlights);\n    }).catch(function (error) {\n      console.error('Error fetching JSON:', error);\n      console.error('URL:', url);\n    });\n  }\n});\nconst flightsLayer = new VectorLayer({\n  source: flightsSource,\n  style: function (feature) {\n    if (feature.get('finished')) {\n      return style;\n    }\n    return null;\n  }\n});\nmap.addLayer(flightsLayer);\nconst pointsPerMs = 0.02;\nfunction animateFlights(event) {\n  const vectorContext = getVectorContext(event);\n  const frameState = event.frameState;\n  vectorContext.setStyle(style);\n  const features = flightsSource.getFeatures();\n  for (let i = 0; i < features.length; i++) {\n    const feature = features[i];\n    if (!feature.get('finished')) {\n      const coords = feature.getGeometry().getCoordinates();\n      const elapsedTime = frameState.time - feature.get('start');\n      if (elapsedTime >= 0) {\n        const elapsedPoints = elapsedTime * pointsPerMs;\n        if (elapsedPoints >= coords.length) {\n          feature.set('finished', true);\n        }\n        const maxIndex = Math.min(elapsedPoints, coords.length);\n        const currentLine = new LineString(coords.slice(0, maxIndex));\n        const worldWidth = getWidth(map.getView().getProjection().getExtent());\n        const offset = Math.floor(map.getView().getCenter()[0] / worldWidth);\n        currentLine.translate(offset * worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n        currentLine.translate(worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n      }\n    }\n  }\n  map.render();\n}\nfunction addLater(features, timeout) {\n  window.setTimeout(function () {\n    let start = Date.now();\n    features.forEach(function (feature) {\n      feature.set('start', start);\n      flightsSource.addFeature(feature);\n      const duration = (feature.getGeometry().getCoordinates().length - 1) / pointsPerMs;\n      start += duration;\n    });\n  }, timeout);\n}\nclass MapComponent extends Component {\n  componentDidMount() {\n    map.setTarget(this.mapRef);\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref => this.mapRef = ref,\n      className: \"map\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 12\n      }\n    });\n  }\n}\nexport default MapComponent;","map":{"version":3,"names":["React","Component","Map","View","Stroke","Style","Icon","Tile","TileLayer","Vector","VectorLayer","OSM","VectorSource","Feature","LineString","getVectorContext","getWidth","arc","airplaneimg","tileLayer","source","map","layers","target","view","center","zoom","airplaneIcon","src","scale","style","stroke","color","width","image","flightsSource","attributions","loader","url","fetch","then","response","ok","Error","json","flightsData","flights","i","length","flight","from","to","arcGenerator","GreatCircle","x","y","arcLine","Arc","offset","features","geometries","forEach","geometry","line","coords","transform","push","finished","addLater","on","animateFlights","catch","error","console","flightsLayer","feature","get","addLayer","pointsPerMs","event","vectorContext","frameState","setStyle","getFeatures","getGeometry","getCoordinates","elapsedTime","time","elapsedPoints","set","maxIndex","Math","min","currentLine","slice","worldWidth","getView","getProjection","getExtent","floor","getCenter","translate","drawGeometry","render","timeout","window","setTimeout","start","Date","now","addFeature","duration","MapComponent","componentDidMount","setTarget","mapRef","createElement","ref","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/Map.js"],"sourcesContent":["import React, { Component } from 'react';\nimport 'ol/ol.css';\nimport './Map.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport { Stroke, Style, Icon } from 'ol/style.js';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer.js';\nimport OSM from 'ol/source/OSM.js'; // Import OSM source\nimport VectorSource from 'ol/source/Vector.js';\nimport Feature from 'ol/Feature.js';\nimport LineString from 'ol/geom/LineString.js';\nimport { getVectorContext } from 'ol/render.js';\nimport { getWidth } from 'ol/extent.js';\nimport arc from 'arc';\nimport airplaneimg from './614.png'\n\nconst tileLayer = new TileLayer({\n  source: new OSM(), // Use OSM source\n});\n\nconst map = new Map({\n  layers: [tileLayer],\n  target: 'map', // Update target to match the ID of the HTML element\n  view: new View({\n    center: [-11000000, 4600000],\n    zoom: 2,\n  }),\n});\n\nconst airplaneIcon = new Icon({\n  src: airplaneimg, // Use the imported image file\n  scale: 0.5, // Scale the size of the icon if needed\n});\n\nconst style = new Style({\n  stroke: new Stroke({\n    color: 'red',\n    width: 2,\n  }),\n  image: airplaneIcon, // Set the airplane icon as the symbol\n});\n\nconst flightsSource = new VectorSource({\n  attributions:\n    'Flight data by ' +\n    '<a href=\"https://openflights.org/data.html\">OpenFlights</a>,',\n  loader: function () {\n    const url = '/data/openflights/flights.json'; // Update the URL\n    fetch(url)\n      .then(function (response) {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json();\n      })\n      .then(function (json) {\n        const flightsData = json.flights;\n        for (let i = 0; i < flightsData.length; i++) {\n          const flight = flightsData[i];\n          const from = flight[0];\n          const to = flight[1];\n\n          const arcGenerator = new arc.GreatCircle(\n            { x: from[1], y: from[0] },\n            { x: to[1], y: to[0] }\n          );\n\n          const arcLine = arcGenerator.Arc(100, { offset: 10 });\n          const features = [];\n          arcLine.geometries.forEach(function (geometry) {\n            const line = new LineString(geometry.coords);\n            line.transform('EPSG:4326', 'EPSG:3857');\n\n            features.push(\n              new Feature({\n                geometry: line,\n                finished: false,\n              })\n            );\n          });\n\n          addLater(features, i * 50);\n        }\n\n        tileLayer.on('postrender', animateFlights);\n      })\n      .catch(function (error) {\n        console.error('Error fetching JSON:', error);\n        console.error('URL:', url);\n      });\n  },\n});\n\nconst flightsLayer = new VectorLayer({\n  source: flightsSource,\n  style: function (feature) {\n    if (feature.get('finished')) {\n      return style;\n    }\n    return null;\n  },\n});\n\nmap.addLayer(flightsLayer);\n\nconst pointsPerMs = 0.02;\nfunction animateFlights(event) {\n  const vectorContext = getVectorContext(event);\n  const frameState = event.frameState;\n  vectorContext.setStyle(style);\n\n  const features = flightsSource.getFeatures();\n  for (let i = 0; i < features.length; i++) {\n    const feature = features[i];\n    if (!feature.get('finished')) {\n      const coords = feature.getGeometry().getCoordinates();\n      const elapsedTime = frameState.time - feature.get('start');\n      if (elapsedTime >= 0) {\n        const elapsedPoints = elapsedTime * pointsPerMs;\n\n        if (elapsedPoints >= coords.length) {\n          feature.set('finished', true);\n        }\n\n        const maxIndex = Math.min(elapsedPoints, coords.length);\n        const currentLine = new LineString(coords.slice(0, maxIndex));\n\n        const worldWidth = getWidth(map.getView().getProjection().getExtent());\n        const offset = Math.floor(map.getView().getCenter()[0] / worldWidth);\n\n        currentLine.translate(offset * worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n        currentLine.translate(worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n      }\n    }\n  }\n\n  map.render();\n}\n\nfunction addLater(features, timeout) {\n  window.setTimeout(function () {\n    let start = Date.now();\n    features.forEach(function (feature) {\n      feature.set('start', start);\n      flightsSource.addFeature(feature);\n      const duration =\n        (feature.getGeometry().getCoordinates().length - 1) / pointsPerMs;\n      start += duration;\n    });\n  }, timeout);\n}\n\nclass MapComponent extends Component {\n  componentDidMount() {\n    map.setTarget(this.mapRef);\n  }\n\n  render() {\n    return <div ref={(ref) => (this.mapRef = ref)} className=\"map\" />;\n  }\n}\n\nexport default MapComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}