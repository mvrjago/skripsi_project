{"ast":null,"code":"var _jsxFileName = \"/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/OpenlayerMaps/Map.js\";\nimport React, { Component } from 'react';\nimport 'ol/ol.css';\nimport '../OpenlayerMaps/Map.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport { Stroke, Style, Icon } from 'ol/style.js';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer.js';\nimport OSM from 'ol/source/OSM.js';\nimport VectorSource from 'ol/source/Vector.js';\nimport Feature from 'ol/Feature.js';\nimport LineString from 'ol/geom/LineString.js';\nimport { getVectorContext } from 'ol/render.js';\nimport { getWidth } from 'ol/extent.js';\nimport arc from 'arc';\nimport airplaneimg from './614.png';\nclass MapComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.handleCoordinateInputChange = event => {\n      this.setState({\n        coordinateInput: event.target.value\n      });\n    };\n    this.handleCoordinateSubmit = () => {\n      const {\n        coordinateInput\n      } = this.state;\n      // Parse koordinat dari string input\n      const coordinates = coordinateInput.split(',').map(coord => parseFloat(coord.trim()));\n      // Cek apakah koordinat valid\n      if (coordinates.length === 2 && !isNaN(coordinates[0]) && !isNaN(coordinates[1])) {\n        // Atur tampilan ke koordinat yang dipilih\n        const view = this.map.getView();\n        view.setCenter(coordinates);\n        view.setZoom(10); // Ganti dengan zoom level yang diinginkan\n      } else {\n        // Tampilkan pesan kesalahan jika koordinat tidak valid\n        alert('Koordinat tidak valid!');\n      }\n    };\n    this.mapRef = /*#__PURE__*/React.createRef();\n    this.map = null;\n    this.flightsSource = null;\n    this.tileLayer = null;\n    this.flightsLayer = null;\n    this.style = null;\n    this.airplaneIcon = null;\n    this.pointsPerMs = 0.02;\n  }\n  componentDidMount() {\n    this.initializeMap();\n  }\n  initializeMap() {\n    this.tileLayer = new TileLayer({\n      source: new OSM()\n    });\n    this.map = new Map({\n      layers: [this.tileLayer],\n      target: this.mapRef.current,\n      view: new View({\n        center: [-11000000, 4600000],\n        zoom: 2\n      })\n    });\n    this.airplaneIcon = new Icon({\n      src: airplaneimg,\n      scale: 0.5\n    });\n    this.style = new Style({\n      stroke: new Stroke({\n        color: 'red',\n        width: 2\n      }),\n      image: this.airplaneIcon\n    });\n    this.flightsSource = new VectorSource({\n      attributions: 'Flight data by ' + '<a href=\"https://openflights.org/data.html\">OpenFlights</a>,',\n      loader: () => {\n        const url = '/data/openflights/flights.json';\n        fetch(url).then(response => {\n          if (!response.ok) {\n            throw new Error('Network response was not ok');\n          }\n          return response.json();\n        }).then(json => {\n          const flightsData = json.flights;\n          for (let i = 0; i < flightsData.length; i++) {\n            const flight = flightsData[i];\n            const from = flight[0];\n            const to = flight[1];\n            const arcGenerator = new arc.GreatCircle({\n              x: from[1],\n              y: from[0]\n            }, {\n              x: to[1],\n              y: to[0]\n            });\n            const arcLine = arcGenerator.Arc(100, {\n              offset: 10\n            });\n            const features = [];\n            arcLine.geometries.forEach(geometry => {\n              const line = new LineString(geometry.coords);\n              line.transform('EPSG:4326', 'EPSG:3857');\n              features.push(new Feature({\n                geometry: line,\n                finished: false\n              }));\n            });\n            this.addLater(features, i * 50);\n          }\n          this.tileLayer.on('postrender', this.animateFlights);\n        }).catch(error => {\n          console.error('Error fetching JSON:', error);\n          console.error('URL:', url);\n        });\n      }\n    });\n    this.flightsLayer = new VectorLayer({\n      source: this.flightsSource,\n      style: feature => {\n        if (feature.get('finished')) {\n          return this.style;\n        }\n        return null;\n      }\n    });\n    this.map.addLayer(this.flightsLayer);\n  }\n  addLater(features, timeout) {\n    window.setTimeout(() => {\n      let start = Date.now();\n      features.forEach(feature => {\n        feature.set('start', start);\n        this.flightsSource.addFeature(feature);\n        const duration = (feature.getGeometry().getCoordinates().length - 1) / this.pointsPerMs;\n        start += duration;\n      });\n    }, timeout);\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapRef,\n      className: \"map\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 12\n      }\n    });\n  }\n}\nexport default MapComponent;","map":{"version":3,"names":["React","Component","Map","View","Stroke","Style","Icon","Tile","TileLayer","Vector","VectorLayer","OSM","VectorSource","Feature","LineString","getVectorContext","getWidth","arc","airplaneimg","MapComponent","constructor","props","handleCoordinateInputChange","event","setState","coordinateInput","target","value","handleCoordinateSubmit","state","coordinates","split","map","coord","parseFloat","trim","length","isNaN","view","getView","setCenter","setZoom","alert","mapRef","createRef","flightsSource","tileLayer","flightsLayer","style","airplaneIcon","pointsPerMs","componentDidMount","initializeMap","source","layers","current","center","zoom","src","scale","stroke","color","width","image","attributions","loader","url","fetch","then","response","ok","Error","json","flightsData","flights","i","flight","from","to","arcGenerator","GreatCircle","x","y","arcLine","Arc","offset","features","geometries","forEach","geometry","line","coords","transform","push","finished","addLater","on","animateFlights","catch","error","console","feature","get","addLayer","timeout","window","setTimeout","start","Date","now","set","addFeature","duration","getGeometry","getCoordinates","render","createElement","ref","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/OpenlayerMaps/Map.js"],"sourcesContent":["import React, { Component } from 'react';\nimport 'ol/ol.css';\nimport '../OpenlayerMaps/Map.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport { Stroke, Style, Icon } from 'ol/style.js';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer.js';\nimport OSM from 'ol/source/OSM.js';\nimport VectorSource from 'ol/source/Vector.js';\nimport Feature from 'ol/Feature.js';\nimport LineString from 'ol/geom/LineString.js';\nimport { getVectorContext } from 'ol/render.js';\nimport { getWidth } from 'ol/extent.js';\nimport arc from 'arc';\nimport airplaneimg from './614.png';\n\nclass MapComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n    this.map = null;\n    this.flightsSource = null;\n    this.tileLayer = null;\n    this.flightsLayer = null;\n    this.style = null;\n    this.airplaneIcon = null;\n    this.pointsPerMs = 0.02;\n  }\n\n  componentDidMount() {\n    this.initializeMap();\n  }\n\n  initializeMap() {\n    this.tileLayer = new TileLayer({\n      source: new OSM(),\n    });\n\n    this.map = new Map({\n      layers: [this.tileLayer],\n      target: this.mapRef.current,\n      view: new View({\n        center: [-11000000, 4600000],\n        zoom: 2,\n      }),\n    });\n\n    this.airplaneIcon = new Icon({\n      src: airplaneimg,\n      scale: 0.5,\n    });\n\n    this.style = new Style({\n      stroke: new Stroke({\n        color: 'red',\n        width: 2,\n      }),\n      image: this.airplaneIcon,\n    });\n\n    this.flightsSource = new VectorSource({\n      attributions:\n        'Flight data by ' +\n        '<a href=\"https://openflights.org/data.html\">OpenFlights</a>,',\n      loader: () => {\n        const url = '/data/openflights/flights.json';\n        fetch(url)\n          .then((response) => {\n            if (!response.ok) {\n              throw new Error('Network response was not ok');\n            }\n            return response.json();\n          })\n          .then((json) => {\n            const flightsData = json.flights;\n            for (let i = 0; i < flightsData.length; i++) {\n              const flight = flightsData[i];\n              const from = flight[0];\n              const to = flight[1];\n\n              const arcGenerator = new arc.GreatCircle(\n                { x: from[1], y: from[0] },\n                { x: to[1], y: to[0] }\n              );\n\n              const arcLine = arcGenerator.Arc(100, { offset: 10 });\n              const features = [];\n              arcLine.geometries.forEach((geometry) => {\n                const line = new LineString(geometry.coords);\n                line.transform('EPSG:4326', 'EPSG:3857');\n\n                features.push(\n                  new Feature({\n                    geometry: line,\n                    finished: false,\n                  })\n                );\n              });\n\n              this.addLater(features, i * 50);\n            }\n\n            this.tileLayer.on('postrender', this.animateFlights);\n          })\n          .catch((error) => {\n            console.error('Error fetching JSON:', error);\n            console.error('URL:', url);\n          });\n      },\n    });\n\n    this.flightsLayer = new VectorLayer({\n      source: this.flightsSource,\n      style: (feature) => {\n        if (feature.get('finished')) {\n          return this.style;\n        }\n        return null;\n      },\n    });\n\n    this.map.addLayer(this.flightsLayer);\n  }\n\n\n  addLater(features, timeout) {\n    window.setTimeout(() => {\n      let start = Date.now();\n      features.forEach((feature) => {\n        feature.set('start', start);\n        this.flightsSource.addFeature(feature);\n        const duration =\n          (feature.getGeometry().getCoordinates().length - 1) / this.pointsPerMs;\n        start += duration;\n      });\n    }, timeout);\n  }\n\n  handleCoordinateInputChange = (event) => {\n    this.setState({ coordinateInput: event.target.value });\n  };\n\n  handleCoordinateSubmit = () => {\n    const { coordinateInput } = this.state;\n    // Parse koordinat dari string input\n    const coordinates = coordinateInput.split(',').map((coord) => parseFloat(coord.trim()));\n    // Cek apakah koordinat valid\n    if (coordinates.length === 2 && !isNaN(coordinates[0]) && !isNaN(coordinates[1])) {\n      // Atur tampilan ke koordinat yang dipilih\n      const view = this.map.getView();\n      view.setCenter(coordinates);\n      view.setZoom(10); // Ganti dengan zoom level yang diinginkan\n    } else {\n      // Tampilkan pesan kesalahan jika koordinat tidak valid\n      alert('Koordinat tidak valid!');\n    }\n  };\n\n  render() {\n    return <div ref={this.mapRef} className=\"map\" />;\n  }\n}\n\nexport default MapComponent;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAO,WAAW;AAClB,OAAO,0BAA0B;AACjC,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,IAAI,MAAM,YAAY;AAC7B,SAASC,MAAM,EAAEC,KAAK,EAAEC,IAAI,QAAQ,aAAa;AACjD,SAASC,IAAI,IAAIC,SAAS,EAAEC,MAAM,IAAIC,WAAW,QAAQ,aAAa;AACtE,OAAOC,GAAG,MAAM,kBAAkB;AAClC,OAAOC,YAAY,MAAM,qBAAqB;AAC9C,OAAOC,OAAO,MAAM,eAAe;AACnC,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,SAASC,gBAAgB,QAAQ,cAAc;AAC/C,SAASC,QAAQ,QAAQ,cAAc;AACvC,OAAOC,GAAG,MAAM,KAAK;AACrB,OAAOC,WAAW,MAAM,WAAW;AAEnC,MAAMC,YAAY,SAASlB,SAAS,CAAC;EACnCmB,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAC,KAwHfC,2BAA2B,GAAIC,KAAK,IAAK;MACvC,IAAI,CAACC,QAAQ,CAAC;QAAEC,eAAe,EAAEF,KAAK,CAACG,MAAM,CAACC;MAAM,CAAC,CAAC;IACxD,CAAC;IAAA,KAEDC,sBAAsB,GAAG,MAAM;MAC7B,MAAM;QAAEH;MAAgB,CAAC,GAAG,IAAI,CAACI,KAAK;MACtC;MACA,MAAMC,WAAW,GAAGL,eAAe,CAACM,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,IAAKC,UAAU,CAACD,KAAK,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC;MACvF;MACA,IAAIL,WAAW,CAACM,MAAM,KAAK,CAAC,IAAI,CAACC,KAAK,CAACP,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAACO,KAAK,CAACP,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE;QAChF;QACA,MAAMQ,IAAI,GAAG,IAAI,CAACN,GAAG,CAACO,OAAO,CAAC,CAAC;QAC/BD,IAAI,CAACE,SAAS,CAACV,WAAW,CAAC;QAC3BQ,IAAI,CAACG,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;MACpB,CAAC,MAAM;QACL;QACAC,KAAK,CAAC,wBAAwB,CAAC;MACjC;IACF,CAAC;IAzIC,IAAI,CAACC,MAAM,gBAAG3C,KAAK,CAAC4C,SAAS,CAAC,CAAC;IAC/B,IAAI,CAACZ,GAAG,GAAG,IAAI;IACf,IAAI,CAACa,aAAa,GAAG,IAAI;IACzB,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,WAAW,GAAG,IAAI;EACzB;EAEAC,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB;EAEAA,aAAaA,CAAA,EAAG;IACd,IAAI,CAACN,SAAS,GAAG,IAAItC,SAAS,CAAC;MAC7B6C,MAAM,EAAE,IAAI1C,GAAG,CAAC;IAClB,CAAC,CAAC;IAEF,IAAI,CAACqB,GAAG,GAAG,IAAI9B,GAAG,CAAC;MACjBoD,MAAM,EAAE,CAAC,IAAI,CAACR,SAAS,CAAC;MACxBpB,MAAM,EAAE,IAAI,CAACiB,MAAM,CAACY,OAAO;MAC3BjB,IAAI,EAAE,IAAInC,IAAI,CAAC;QACbqD,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC;QAC5BC,IAAI,EAAE;MACR,CAAC;IACH,CAAC,CAAC;IAEF,IAAI,CAACR,YAAY,GAAG,IAAI3C,IAAI,CAAC;MAC3BoD,GAAG,EAAExC,WAAW;MAChByC,KAAK,EAAE;IACT,CAAC,CAAC;IAEF,IAAI,CAACX,KAAK,GAAG,IAAI3C,KAAK,CAAC;MACrBuD,MAAM,EAAE,IAAIxD,MAAM,CAAC;QACjByD,KAAK,EAAE,KAAK;QACZC,KAAK,EAAE;MACT,CAAC,CAAC;MACFC,KAAK,EAAE,IAAI,CAACd;IACd,CAAC,CAAC;IAEF,IAAI,CAACJ,aAAa,GAAG,IAAIjC,YAAY,CAAC;MACpCoD,YAAY,EACV,iBAAiB,GACjB,8DAA8D;MAChEC,MAAM,EAAEA,CAAA,KAAM;QACZ,MAAMC,GAAG,GAAG,gCAAgC;QAC5CC,KAAK,CAACD,GAAG,CAAC,CACPE,IAAI,CAAEC,QAAQ,IAAK;UAClB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;YAChB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;UAChD;UACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;QACxB,CAAC,CAAC,CACDJ,IAAI,CAAEI,IAAI,IAAK;UACd,MAAMC,WAAW,GAAGD,IAAI,CAACE,OAAO;UAChC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,WAAW,CAACrC,MAAM,EAAEuC,CAAC,EAAE,EAAE;YAC3C,MAAMC,MAAM,GAAGH,WAAW,CAACE,CAAC,CAAC;YAC7B,MAAME,IAAI,GAAGD,MAAM,CAAC,CAAC,CAAC;YACtB,MAAME,EAAE,GAAGF,MAAM,CAAC,CAAC,CAAC;YAEpB,MAAMG,YAAY,GAAG,IAAI9D,GAAG,CAAC+D,WAAW,CACtC;cAAEC,CAAC,EAAEJ,IAAI,CAAC,CAAC,CAAC;cAAEK,CAAC,EAAEL,IAAI,CAAC,CAAC;YAAE,CAAC,EAC1B;cAAEI,CAAC,EAAEH,EAAE,CAAC,CAAC,CAAC;cAAEI,CAAC,EAAEJ,EAAE,CAAC,CAAC;YAAE,CACvB,CAAC;YAED,MAAMK,OAAO,GAAGJ,YAAY,CAACK,GAAG,CAAC,GAAG,EAAE;cAAEC,MAAM,EAAE;YAAG,CAAC,CAAC;YACrD,MAAMC,QAAQ,GAAG,EAAE;YACnBH,OAAO,CAACI,UAAU,CAACC,OAAO,CAAEC,QAAQ,IAAK;cACvC,MAAMC,IAAI,GAAG,IAAI5E,UAAU,CAAC2E,QAAQ,CAACE,MAAM,CAAC;cAC5CD,IAAI,CAACE,SAAS,CAAC,WAAW,EAAE,WAAW,CAAC;cAExCN,QAAQ,CAACO,IAAI,CACX,IAAIhF,OAAO,CAAC;gBACV4E,QAAQ,EAAEC,IAAI;gBACdI,QAAQ,EAAE;cACZ,CAAC,CACH,CAAC;YACH,CAAC,CAAC;YAEF,IAAI,CAACC,QAAQ,CAACT,QAAQ,EAAEX,CAAC,GAAG,EAAE,CAAC;UACjC;UAEA,IAAI,CAAC7B,SAAS,CAACkD,EAAE,CAAC,YAAY,EAAE,IAAI,CAACC,cAAc,CAAC;QACtD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;UAChBC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;UAC5CC,OAAO,CAACD,KAAK,CAAC,MAAM,EAAEjC,GAAG,CAAC;QAC5B,CAAC,CAAC;MACN;IACF,CAAC,CAAC;IAEF,IAAI,CAACnB,YAAY,GAAG,IAAIrC,WAAW,CAAC;MAClC2C,MAAM,EAAE,IAAI,CAACR,aAAa;MAC1BG,KAAK,EAAGqD,OAAO,IAAK;QAClB,IAAIA,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,EAAE;UAC3B,OAAO,IAAI,CAACtD,KAAK;QACnB;QACA,OAAO,IAAI;MACb;IACF,CAAC,CAAC;IAEF,IAAI,CAAChB,GAAG,CAACuE,QAAQ,CAAC,IAAI,CAACxD,YAAY,CAAC;EACtC;EAGAgD,QAAQA,CAACT,QAAQ,EAAEkB,OAAO,EAAE;IAC1BC,MAAM,CAACC,UAAU,CAAC,MAAM;MACtB,IAAIC,KAAK,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;MACtBvB,QAAQ,CAACE,OAAO,CAAEa,OAAO,IAAK;QAC5BA,OAAO,CAACS,GAAG,CAAC,OAAO,EAAEH,KAAK,CAAC;QAC3B,IAAI,CAAC9D,aAAa,CAACkE,UAAU,CAACV,OAAO,CAAC;QACtC,MAAMW,QAAQ,GACZ,CAACX,OAAO,CAACY,WAAW,CAAC,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC9E,MAAM,GAAG,CAAC,IAAI,IAAI,CAACc,WAAW;QACxEyD,KAAK,IAAIK,QAAQ;MACnB,CAAC,CAAC;IACJ,CAAC,EAAER,OAAO,CAAC;EACb;EAsBAW,MAAMA,CAAA,EAAG;IACP,oBAAOnH,KAAA,CAAAoH,aAAA;MAAKC,GAAG,EAAE,IAAI,CAAC1E,MAAO;MAAC2E,SAAS,EAAC,KAAK;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC;EAClD;AACF;AAEA,eAAezG,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}