{"ast":null,"code":"'use strict';\n\nconst fs = require('../utils/fs');\nconst log = require('../utils/log');\nconst config = require('./config');\nconst paths = require('../text/paths.json');\nconst loader = require('./loader');\nconst error = require('./error');\nconst arcConfig = require('./arcjsConfig');\nconst _ = require('lodash');\nconst env = require('./env');\nconst extension = require('./extension');\n\n/**\n * main server class contains\n * all the arc functionalities\n * @class ArcJs\n */\nclass ArcJs {\n  constructor(appDir) {\n    this.error = error;\n    this.fs = fs;\n    this.log = log;\n    this.ENV = env();\n    this.paths = this._resolvePaths(paths, appDir);\n    this.paths.app = appDir;\n  }\n  async init() {\n    this.ArcJsConfig = await arcConfig(this.paths.arcJsConfig);\n    this.config = await config.load(this.paths.config, this.ENV);\n    await extension.load({\n      location: this.paths.extensions,\n      exts: _.get(this.ArcJsConfig, 'extensions') || [],\n      deps: {\n        config: this.config,\n        log: this.log\n      }\n    });\n  }\n  _resolvePaths(pathsList, prefix) {\n    const resolved = {};\n    this.fs.resolvePaths(pathsList, prefix, (resolvedPath, key) => {\n      resolved[key] = resolvedPath;\n    });\n    return resolved;\n  }\n  async loadArc(location, spec, loaded) {\n    if (typeof spec === 'string') {\n      spec = await this.fs.loadModules(spec).data;\n    }\n    return loader.load(location, spec, loaded);\n  }\n  async before(args) {\n    await extension.execBefore(args);\n  }\n  async component(args) {\n    await extension.execComponent(args);\n  }\n  async after(args) {\n    await extension.execAfter(args);\n  }\n  async bootstrap() {\n    if (!(await fs.canRead(this.paths.bootstrap))) {\n      return;\n    }\n    const bs = await fs.loadModules(this.paths.bootstrap, true);\n    if (bs) {\n      await bs.data();\n    }\n  }\n}\nmodule.exports = ArcJs;","map":{"version":3,"names":["fs","require","log","config","paths","loader","error","arcConfig","_","env","extension","ArcJs","constructor","appDir","ENV","_resolvePaths","app","init","ArcJsConfig","arcJsConfig","load","location","extensions","exts","get","deps","pathsList","prefix","resolved","resolvePaths","resolvedPath","key","loadArc","spec","loaded","loadModules","data","before","args","execBefore","component","execComponent","after","execAfter","bootstrap","canRead","bs","module","exports"],"sources":["/Users/mariovicky/Skripsi_OpenLayers/node_modules/arc.js/lib/server.js"],"sourcesContent":["'use strict';\n\nconst fs = require('../utils/fs');\nconst log = require('../utils/log');\nconst config = require('./config');\nconst paths = require('../text/paths.json');\nconst loader = require('./loader');\nconst error = require('./error');\nconst arcConfig = require('./arcjsConfig');\nconst _ = require('lodash');\nconst env = require('./env');\n\nconst extension = require('./extension');\n\n/**\n * main server class contains\n * all the arc functionalities\n * @class ArcJs\n */\nclass ArcJs {\n  constructor (appDir) {\n    this.error = error;\n    this.fs = fs;\n    this.log = log;\n    this.ENV = env();\n    this.paths = this._resolvePaths(paths, appDir);\n    this.paths.app = appDir;\n  }\n\n  async init () {\n    this.ArcJsConfig = await arcConfig(this.paths.arcJsConfig);\n    this.config = await config.load(this.paths.config, this.ENV);\n    await extension.load({\n      location: this.paths.extensions,\n      exts: _.get(this.ArcJsConfig, 'extensions') || [],\n      deps: {\n        config: this.config,\n        log: this.log\n      }\n    });\n  }\n\n  _resolvePaths (pathsList, prefix) {\n    const resolved = {};\n\n    this.fs.resolvePaths(pathsList, prefix, (resolvedPath, key) => {\n      resolved[key] = resolvedPath;\n    });\n\n    return resolved;\n  }\n\n  async loadArc (location, spec, loaded) {\n    if (typeof spec === 'string') {\n      spec = await this.fs.loadModules(spec).data;\n    }\n    return loader.load(location, spec, loaded);\n  }\n\n  async before (args) {\n    await extension.execBefore(args);\n  }\n\n  async component (args) {\n    await extension.execComponent(args);\n  }\n\n  async after (args) {\n    await extension.execAfter(args);\n  }\n\n  async bootstrap () {\n\n    if (!await fs.canRead(this.paths.bootstrap)) {\n      return;\n    }\n\n    const bs = await fs.loadModules(this.paths.bootstrap, true);\n    if (bs) {\n      await bs.data();\n    }\n  }\n\n}\n\nmodule.exports = ArcJs;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}