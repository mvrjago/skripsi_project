{"ast":null,"code":"var _jsxFileName = \"/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/LeafletMaps/Map2.js\",\n  _s = $RefreshSig$();\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet';\nimport 'leaflet-draw';\nimport 'leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js';\nimport '../LeafletMaps/Map2.css';\nimport React, { useEffect } from 'react';\nimport L from 'leaflet';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nconst MapComponent2 = () => {\n  _s();\n  useEffect(() => {\n    const map = L.map('map').setView([0, 0], 2);\n    const mapBounds = L.latLngBounds();\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; OpenStreetMap contributors',\n      maxZoom: 18\n    }).addTo(map);\n    const aircraftLayer = L.layerGroup().addTo(map);\n    const aircraftMovementLayer = L.layerGroup().addTo(map);\n    const drawnItems = new L.FeatureGroup();\n    map.addLayer(drawnItems);\n    const drawControl = new L.Control.Draw({\n      draw: {\n        rectangle: true,\n        polyline: false,\n        circle: false,\n        circlemarker: false,\n        marker: false,\n        polygon: false\n      },\n      edit: {\n        featureGroup: drawnItems,\n        remove: true\n      }\n    });\n    map.addControl(drawControl);\n    const showBoundingBoxCoordinates = bounds => {\n      const bboxCoordinatesElement = document.getElementById('bbox-coordinates');\n      bboxCoordinatesElement.textContent = bounds.toBBoxString();\n      const layer = L.rectangle(bounds);\n      layer.bindPopup(`BBox: ${bounds.toBBoxString()}`).openPopup();\n      drawnItems.addLayer(layer);\n      updateAircraftPositions(bounds);\n      mapBounds.extend(bounds);\n    };\n    const drawCreatedHandler = event => {\n      drawnItems.clearLayers();\n      const layer = event.layer;\n      drawnItems.addLayer(layer);\n      const bounds = layer.getBounds();\n      showBoundingBoxCoordinates(bounds);\n      map.fitBounds(bounds);\n    };\n    map.on('draw:created', drawCreatedHandler);\n    const drawDeletedHandler = event => {\n      const layers = event.layers;\n      layers.eachLayer(layer => {\n        drawnItems.removeLayer(layer);\n        aircraftMovementLayer.clearLayers();\n      });\n      const bboxCoordinatesElement = document.getElementById('bbox-coordinates');\n      bboxCoordinatesElement.textContent = \"\";\n    };\n    map.on('draw:deleted', drawDeletedHandler);\n    const copyBoundingBoxCoordinates = () => {\n      const bboxCoordinatesElement = document.getElementById('bbox-coordinates');\n      const bboxCoordinates = bboxCoordinatesElement.textContent;\n      navigator.clipboard.writeText(bboxCoordinates).then(() => {\n        alert('Koordinat berhasil disalin!');\n      }).catch(error => {\n        console.error('Error:', error);\n      });\n    };\n    const updateAircraftPositions = bounds => {\n      fetch('/aircraft') // Menggunakan URL relatif\n      .then(response => response.json()).then(data => {\n        aircraftLayer.clearLayers();\n        data.forEach(aircraft => {\n          const icao24 = aircraft[0];\n          const latitude = aircraft[1];\n          const longitude = aircraft[2];\n          const altitude = aircraft[3];\n          const heading = aircraft[4];\n          if (latitude !== null) {\n            if (bounds && latitude >= bounds.getSouthWest().lat && latitude <= bounds.getNorthEast().lat && longitude >= bounds.getSouthWest().lng && longitude <= bounds.getNorthEast().lng) {\n              const marker = L.marker([latitude, longitude]).addTo(aircraftLayer);\n              marker.on('click', () => {\n                const popupContent = `\n                    <strong>ICAO24:</strong> ${icao24}<br>\n                    <strong>Latitude:</strong> ${latitude}<br>\n                    <strong>Longitude:</strong> ${longitude}<br>\n                    <strong>Altitude:</strong> ${altitude}<br>\n                    <button class=\"button button-show\" onclick=\"showAircraftMovement('${icao24}', ${latitude}, ${longitude}, ${heading})\">Tampilkan Gerakan</button>\n                  `;\n                marker.bindPopup(popupContent).openPopup();\n              });\n            }\n          }\n        });\n      }).catch(error => console.error('Error:', error));\n    };\n    return () => {\n      map.off('draw:created', drawCreatedHandler);\n      map.off('draw:deleted', drawDeletedHandler);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"map\",\n    className: \"map\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bbox-result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, \"Hasil Koordinat Bbox:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 47\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    id: \"bbox-coordinates\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  })));\n};\n_s(MapComponent2, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = MapComponent2;\nexport default MapComponent2;\nvar _c;\n$RefreshReg$(_c, \"MapComponent2\");","map":{"version":3,"names":["React","useEffect","L","MapComponent2","_s","map","setView","mapBounds","latLngBounds","tileLayer","attribution","maxZoom","addTo","aircraftLayer","layerGroup","aircraftMovementLayer","drawnItems","FeatureGroup","addLayer","drawControl","Control","Draw","draw","rectangle","polyline","circle","circlemarker","marker","polygon","edit","featureGroup","remove","addControl","showBoundingBoxCoordinates","bounds","bboxCoordinatesElement","document","getElementById","textContent","toBBoxString","layer","bindPopup","openPopup","updateAircraftPositions","extend","drawCreatedHandler","event","clearLayers","getBounds","fitBounds","on","drawDeletedHandler","layers","eachLayer","removeLayer","copyBoundingBoxCoordinates","bboxCoordinates","navigator","clipboard","writeText","then","alert","catch","error","console","fetch","response","json","data","forEach","aircraft","icao24","latitude","longitude","altitude","heading","getSouthWest","lat","getNorthEast","lng","popupContent","off","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","id","className","_c","$RefreshReg$"],"sources":["/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/LeafletMaps/Map2.js"],"sourcesContent":["import 'leaflet/dist/leaflet.css';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet';\nimport 'leaflet-draw';\nimport 'leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js';\nimport '../LeafletMaps/Map2.css';\nimport React, { useEffect } from 'react';\nimport L from 'leaflet';\nimport 'leaflet-draw/dist/leaflet.draw.css';\n\nconst MapComponent2 = () => {\n  useEffect(() => {\n    const map = L.map('map').setView([0, 0], 2);\n    const mapBounds = L.latLngBounds();\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; OpenStreetMap contributors',\n      maxZoom: 18,\n    }).addTo(map);\n\n    const aircraftLayer = L.layerGroup().addTo(map);\n    const aircraftMovementLayer = L.layerGroup().addTo(map);\n\n    const drawnItems = new L.FeatureGroup();\n    map.addLayer(drawnItems);\n    const drawControl = new L.Control.Draw({\n      draw: {\n        rectangle: true,\n        polyline: false,\n        circle: false,\n        circlemarker: false,\n        marker: false,\n        polygon: false\n      },\n      edit: {\n        featureGroup: drawnItems,\n        remove: true,\n      },\n    });\n    map.addControl(drawControl);\n\n    const showBoundingBoxCoordinates = (bounds) => {\n      const bboxCoordinatesElement = document.getElementById('bbox-coordinates');\n      bboxCoordinatesElement.textContent = bounds.toBBoxString();\n\n      const layer = L.rectangle(bounds);\n      layer.bindPopup(`BBox: ${bounds.toBBoxString()}`).openPopup();\n      drawnItems.addLayer(layer);\n\n      updateAircraftPositions(bounds);\n\n      mapBounds.extend(bounds);\n    };\n\n    const drawCreatedHandler = (event) => {\n      drawnItems.clearLayers();\n\n      const layer = event.layer;\n      drawnItems.addLayer(layer);\n      const bounds = layer.getBounds();\n      showBoundingBoxCoordinates(bounds);\n      map.fitBounds(bounds);\n    };\n\n    map.on('draw:created', drawCreatedHandler);\n\n    const drawDeletedHandler = (event) => {\n      const layers = event.layers;\n      layers.eachLayer((layer) => {\n        drawnItems.removeLayer(layer);\n        aircraftMovementLayer.clearLayers();\n      });\n\n      const bboxCoordinatesElement = document.getElementById('bbox-coordinates');\n      bboxCoordinatesElement.textContent = \"\";\n    };\n\n    map.on('draw:deleted', drawDeletedHandler);\n\n    const copyBoundingBoxCoordinates = () => {\n      const bboxCoordinatesElement = document.getElementById('bbox-coordinates');\n      const bboxCoordinates = bboxCoordinatesElement.textContent;\n\n      navigator.clipboard.writeText(bboxCoordinates)\n        .then(() => {\n          alert('Koordinat berhasil disalin!');\n        })\n        .catch((error) => {\n          console.error('Error:', error);\n        });\n    };\n\n    const updateAircraftPositions = (bounds) => {\n      fetch('/aircraft') // Menggunakan URL relatif\n        .then((response) => response.json())\n        .then((data) => {\n          aircraftLayer.clearLayers();\n\n          data.forEach((aircraft) => {\n            const icao24 = aircraft[0];\n            const latitude = aircraft[1];\n            const longitude = aircraft[2];\n            const altitude = aircraft[3];\n            const heading = aircraft[4];\n\n            if (latitude !== null) {\n              if (\n                bounds &&\n                latitude >= bounds.getSouthWest().lat &&\n                latitude <= bounds.getNorthEast().lat &&\n                longitude >= bounds.getSouthWest().lng &&\n                longitude <= bounds.getNorthEast().lng\n              ) {\n                const marker = L.marker([latitude, longitude]).addTo(aircraftLayer);\n\n                marker.on('click', () => {\n                  const popupContent = `\n                    <strong>ICAO24:</strong> ${icao24}<br>\n                    <strong>Latitude:</strong> ${latitude}<br>\n                    <strong>Longitude:</strong> ${longitude}<br>\n                    <strong>Altitude:</strong> ${altitude}<br>\n                    <button class=\"button button-show\" onclick=\"showAircraftMovement('${icao24}', ${latitude}, ${longitude}, ${heading})\">Tampilkan Gerakan</button>\n                  `;\n                  marker.bindPopup(popupContent).openPopup();\n                });\n              }\n            }\n          });\n        })\n        .catch((error) => console.error('Error:', error));\n    };\n\n    return () => {\n      map.off('draw:created', drawCreatedHandler);\n      map.off('draw:deleted', drawDeletedHandler);\n    };\n  }, []);\n\n  return (\n    <div>\n      <div id=\"map\" className=\"map\"></div>\n\n      <div className=\"bbox-result\">\n        <strong>Hasil Koordinat Bbox:</strong><br />\n        <span id=\"bbox-coordinates\"></span>\n        {/* <button id=\"copy-button\" onClick={copyBoundingBoxCoordinates}>\n          <i className=\"fas fa-copy\"></i>\n        </button> */}\n      </div>\n    </div>\n  );\n};\n\nexport default MapComponent2;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}