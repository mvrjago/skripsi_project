{"ast":null,"code":"var _jsxFileName = \"/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/Map2.js\";\nimport React, { Component } from 'react';\nimport 'leaflet/dist/leaflet.css';\nimport './Map2.css';\nimport L from 'leaflet';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet-draw';\nimport 'leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js';\nimport airplaneIcon from '../Layout/airplane.png';\nclass MapComponent2 extends Component {\n  constructor(props) {\n    super(props);\n    this.initDrawControl = () => {\n      this.rectangleLayer = new L.FeatureGroup();\n      this.map.addLayer(this.rectangleLayer);\n      const drawControl = new L.Control.Draw({\n        draw: {\n          rectangle: true,\n          polyline: false,\n          circle: false,\n          circlemarker: false,\n          marker: false,\n          polygon: false\n        },\n        edit: {\n          featureGroup: this.rectangleLayer,\n          remove: true\n        }\n      });\n      this.map.addControl(drawControl);\n      this.map.on(L.Draw.Event.CREATED, this.onDrawCreated);\n    };\n    this.onDrawCreated = event => {\n      const {\n        layer\n      } = event;\n      this.rectangleLayer.addLayer(layer);\n      this.rectangle = layer;\n      this.updateBboxCoordinates();\n      const bbox = this.getBoundingBox();\n      if (bbox) {\n        this.map.fitBounds([[bbox.south, bbox.west], [bbox.north, bbox.east]]);\n      }\n      this.fetchAircraftData();\n    };\n    this.updateBboxCoordinates = () => {\n      const bboxCoordinates = this.rectangle ? this.rectangle.getLatLngs()[0].map(latLng => [latLng.lat, latLng.lng]) : [];\n      this.setState({\n        bboxCoordinates\n      }, () => {\n        const bbox = this.getBoundingBox();\n        if (bbox) {\n          console.log('Bounding Box:', bbox);\n        }\n      });\n    };\n    this.getBoundingBox = () => {\n      const {\n        bboxCoordinates\n      } = this.state;\n      if (bboxCoordinates.length === 0) {\n        return null;\n      }\n      const west = bboxCoordinates[0][1];\n      const south = bboxCoordinates[0][0];\n      const east = bboxCoordinates[2][1];\n      const north = bboxCoordinates[2][0];\n      if (!Number.isFinite(west) || !Number.isFinite(south) || !Number.isFinite(east) || !Number.isFinite(north)) {\n        return null;\n      }\n      return {\n        west,\n        south,\n        east,\n        north\n      };\n    };\n    this.fetchAircraftData = () => {\n      const bbox = this.getBoundingBox();\n      if (!bbox) {\n        return;\n      }\n      const url = `http://127.0.0.1:5000/aircraft?bbox=${bbox.west},${bbox.south},${bbox.east},${bbox.north}`;\n      fetch(url).then(response => response.json()).then(data => {\n        this.updateAircraftMarkers(data);\n        this.drawFlightPaths(data);\n      }).catch(error => console.error('Error:', error));\n    };\n    this.updateAircraftMarkers = aircraftData => {\n      if (this.airplaneLayer) {\n        this.map.removeLayer(this.airplaneLayer);\n      }\n      this.airplaneLayer = L.layerGroup().addTo(this.map);\n      const bbox = this.getBoundingBox();\n      aircraftData.forEach(aircraft => {\n        const [icao24, lat, lon, altitude, heading] = aircraft;\n        if (!Number.isFinite(lat) || !Number.isFinite(lon)) {\n          return;\n        }\n\n        // Check if the aircraft is within the bounding box\n        if (lat >= bbox.south && lat <= bbox.north && lon >= bbox.west && lon <= bbox.east) {\n          L.marker([lat, lon], {\n            icon: this.airplaneIcon\n          }).addTo(this.airplaneLayer).bindPopup(icao24);\n        }\n      });\n    };\n    this.drawFlightPaths = flightData => {\n      if (!flightData || !flightData.length) {\n        return;\n      }\n      const bbox = this.getBoundingBox();\n      const polylines = [];\n      flightData.forEach(flight => {\n        const [icao24, lat1, lon1, lat2, lon2] = flight;\n        if (!Number.isFinite(lat1) || !Number.isFinite(lon1) || !Number.isFinite(lat2) || !Number.isFinite(lon2)) {\n          return;\n        }\n\n        // Periksa apakah koordinat penerbangan berada dalam kotak pembatas\n        if (lat1 >= bbox.south && lat1 <= bbox.north && lon1 >= bbox.west && lon1 <= bbox.east || lat2 >= bbox.south && lat2 <= bbox.north && lon2 >= bbox.west && lon2 <= bbox.east) {\n          const polyline = L.polyline([[lat1, lon1], [lat2, lon2]], {\n            color: 'blue'\n          });\n          polylines.push(polyline);\n        }\n      });\n      const decorator = L.polylineDecorator(polylines, {\n        patterns: [{\n          offset: '50%',\n          symbol: L.Symbol.arrowHead({\n            pixelSize: 10,\n            polygon: false,\n            pathOptions: {\n              color: 'blue'\n            }\n          })\n        }]\n      });\n      decorator.addTo(this.map);\n    };\n    this.animateFlights = () => {\n      const context = this.map._renderer._container.getContext('2d');\n      const vectorContext = L.canvas({\n        padding: 0\n      });\n\n      // Clear the canvas\n      context.clearRect(0, 0, this.map._renderer._container.width, this.map._renderer._container.height);\n      const bbox = this.getBoundingBox(); // Tambahkan deklarasi bbox di sini\n\n      // Loop through flight data and animate flights\n      this.flightData.forEach(flight => {\n        const [icao24, lat1, lon1, lat2, lon2] = flight;\n        if (!Number.isFinite(lat1) || !Number.isFinite(lon1) || !Number.isFinite(lat2) || !Number.isFinite(lon2)) {\n          return;\n        }\n\n        // Check if the flight coordinates are within the bounding box\n        if (lat1 >= bbox.south && lat1 <= bbox.north && lon1 >= bbox.west && lon1 <= bbox.east || lat2 >= bbox.south && lat2 <= bbox.north && lon2 >= bbox.west && lon2 <= bbox.east) {\n          // Get the projected coordinates\n          const p1 = this.map.latLngToLayerPoint([lat1, lon1]);\n          const p2 = this.map.latLngToLayerPoint([lat2, lon2]);\n\n          // Calculate the animation progress\n          const progress = Date.now() % 10000 / 10000;\n\n          // Calculate the current position\n          const x = p1.x + (p2.x - p1.x) * progress;\n          const y = p1.y + (p2.y - p1.y) * progress;\n\n          // Draw the airplane icon at the current position\n          vectorContext.clearRect(0, 0, this.map._renderer._container.width, this.map._renderer._container.height);\n          vectorContext.drawImage(this.airplaneIcon._image, x, y, 32, 32);\n\n          // Render the vector layer\n          this.map._renderer._renderPath(vectorContext);\n        }\n      });\n    };\n    this.state = {\n      center: [0, 0],\n      zoom: 1,\n      bboxCoordinates: [],\n      drawing: false\n    };\n    this.map = null;\n    this.mapRef = /*#__PURE__*/React.createRef();\n    this.rectangleLayer = null;\n    this.rectangle = null;\n    this.airplaneLayer = null;\n    this.airplaneIcon = L.icon({\n      iconUrl: airplaneIcon,\n      iconSize: [32, 32]\n    });\n    this.flightData = []; // Array to store flight data\n  }\n\n  componentDidMount() {\n    this.map = L.map(this.mapRef.current).setView(this.state.center, this.state.zoom);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data Â© <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors'\n    }).addTo(this.map);\n    this.map.on('moveend', () => {\n      const center = this.map.getCenter();\n      const zoom = this.map.getZoom();\n      this.setState({\n        center: [center.lat, center.lng],\n        zoom\n      });\n      this.fetchAircraftData();\n    });\n    this.map.on('postrender', this.animateFlights); // Add postrender event listener\n    this.initDrawControl();\n    this.fetchAircraftData();\n  }\n  componentWillUnmount() {\n    this.map.off('moveend');\n    this.map.off('postrender');\n    this.map = null;\n  }\n  render() {\n    const {\n      bboxCoordinates\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"map-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapRef,\n      className: \"map\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bbox-coordinates\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }\n    }, bboxCoordinates.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 15\n      }\n    }, \"Bbox Coordinates:\"), bboxCoordinates.map((coord, index) => /*#__PURE__*/React.createElement(\"span\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }\n    }, \"[\", coord[0].toFixed(2), \", \", coord[1].toFixed(2), \"]\")))));\n  }\n}\nexport default MapComponent2;","map":{"version":3,"names":["React","Component","L","airplaneIcon","MapComponent2","constructor","props","initDrawControl","rectangleLayer","FeatureGroup","map","addLayer","drawControl","Control","Draw","draw","rectangle","polyline","circle","circlemarker","marker","polygon","edit","featureGroup","remove","addControl","on","Event","CREATED","onDrawCreated","event","layer","updateBboxCoordinates","bbox","getBoundingBox","fitBounds","south","west","north","east","fetchAircraftData","bboxCoordinates","getLatLngs","latLng","lat","lng","setState","console","log","state","length","Number","isFinite","url","fetch","then","response","json","data","updateAircraftMarkers","drawFlightPaths","catch","error","aircraftData","airplaneLayer","removeLayer","layerGroup","addTo","forEach","aircraft","icao24","lon","altitude","heading","icon","bindPopup","flightData","polylines","flight","lat1","lon1","lat2","lon2","color","push","decorator","polylineDecorator","patterns","offset","symbol","Symbol","arrowHead","pixelSize","pathOptions","animateFlights","context","_renderer","_container","getContext","vectorContext","canvas","padding","clearRect","width","height","p1","latLngToLayerPoint","p2","progress","Date","now","x","y","drawImage","_image","_renderPath","center","zoom","drawing","mapRef","createRef","iconUrl","iconSize","componentDidMount","current","setView","tileLayer","attribution","getCenter","getZoom","componentWillUnmount","off","render","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","Fragment","coord","index","key","toFixed"],"sources":["/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/Map2.js"],"sourcesContent":["import React, { Component } from 'react';\nimport 'leaflet/dist/leaflet.css';\nimport './Map2.css';\nimport L from 'leaflet';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet-draw';\nimport 'leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js';\n\nimport airplaneIcon from '../Layout/airplane.png';\n\nclass MapComponent2 extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      center: [0, 0],\n      zoom: 1,\n      bboxCoordinates: [],\n      drawing: false,\n    };\n\n    this.map = null;\n    this.mapRef = React.createRef();\n    this.rectangleLayer = null;\n    this.rectangle = null;\n    this.airplaneLayer = null;\n    this.airplaneIcon = L.icon({\n      iconUrl: airplaneIcon,\n      iconSize: [32, 32],\n    });\n    this.flightData = []; // Array to store flight data\n  }\n\n  componentDidMount() {\n    this.map = L.map(this.mapRef.current).setView(this.state.center, this.state.zoom);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data Â© <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors',\n    }).addTo(this.map);\n\n    this.map.on('moveend', () => {\n      const center = this.map.getCenter();\n      const zoom = this.map.getZoom();\n      this.setState({ center: [center.lat, center.lng], zoom });\n      this.fetchAircraftData();\n    });\n\n    this.map.on('postrender', this.animateFlights); // Add postrender event listener\n    this.initDrawControl();\n    this.fetchAircraftData();\n  }\n\n  componentWillUnmount() {\n    this.map.off('moveend');\n    this.map.off('postrender');\n    this.map = null;\n  }\n\n  initDrawControl = () => {\n    this.rectangleLayer = new L.FeatureGroup();\n    this.map.addLayer(this.rectangleLayer);\n\n    const drawControl = new L.Control.Draw({\n      draw: {\n        rectangle: true,\n        polyline: false,\n        circle: false,\n        circlemarker: false,\n        marker: false,\n        polygon: false,\n      },\n      edit: {\n        featureGroup: this.rectangleLayer,\n        remove: true,\n      },\n    });\n\n    this.map.addControl(drawControl);\n    this.map.on(L.Draw.Event.CREATED, this.onDrawCreated);\n  };\n\n  onDrawCreated = (event) => {\n    const { layer } = event;\n    this.rectangleLayer.addLayer(layer);\n    this.rectangle = layer;\n    this.updateBboxCoordinates();\n\n    const bbox = this.getBoundingBox();\n    if (bbox) {\n      this.map.fitBounds([[bbox.south, bbox.west], [bbox.north, bbox.east]]);\n    }\n\n    this.fetchAircraftData();\n  };\n\n  updateBboxCoordinates = () => {\n    const bboxCoordinates = this.rectangle\n      ? this.rectangle.getLatLngs()[0].map((latLng) => [latLng.lat, latLng.lng])\n      : [];\n    this.setState({ bboxCoordinates }, () => {\n      const bbox = this.getBoundingBox();\n      if (bbox) {\n        console.log('Bounding Box:', bbox);\n      }\n    });\n  };\n\n  getBoundingBox = () => {\n    const { bboxCoordinates } = this.state;\n    if (bboxCoordinates.length === 0) {\n      return null;\n    }\n\n    const west = bboxCoordinates[0][1];\n    const south = bboxCoordinates[0][0];\n    const east = bboxCoordinates[2][1];\n    const north = bboxCoordinates[2][0];\n\n    if (!Number.isFinite(west) || !Number.isFinite(south) || !Number.isFinite(east) || !Number.isFinite(north)) {\n      return null;\n    }\n\n    return { west, south, east, north };\n  };\n\n  fetchAircraftData = () => {\n    const bbox = this.getBoundingBox();\n    if (!bbox) {\n      return;\n    }\n    const url = `http://127.0.0.1:5000/aircraft?bbox=${bbox.west},${bbox.south},${bbox.east},${bbox.north}`;\n  \n    fetch(url)\n      .then((response) => response.json())\n      .then((data) => {\n        this.updateAircraftMarkers(data);\n        this.drawFlightPaths(data);\n      })\n      .catch((error) => console.error('Error:', error));\n  };\n  \n\n  updateAircraftMarkers = (aircraftData) => {\n    if (this.airplaneLayer) {\n      this.map.removeLayer(this.airplaneLayer);\n    }\n\n    this.airplaneLayer = L.layerGroup().addTo(this.map);\n\n    const bbox = this.getBoundingBox();\n\n    aircraftData.forEach((aircraft) => {\n      const [icao24, lat, lon, altitude, heading] = aircraft;\n      if (!Number.isFinite(lat) || !Number.isFinite(lon)) {\n        return;\n      }\n\n      // Check if the aircraft is within the bounding box\n      if (lat >= bbox.south && lat <= bbox.north && lon >= bbox.west && lon <= bbox.east) {\n        L.marker([lat, lon], { icon: this.airplaneIcon })\n          .addTo(this.airplaneLayer)\n          .bindPopup(icao24);\n      }\n    });\n  };\n\n  drawFlightPaths = (flightData) => {\n    if (!flightData || !flightData.length) {\n      return;\n    }\n  \n    const bbox = this.getBoundingBox();\n  \n    const polylines = [];\n  \n    flightData.forEach((flight) => {\n      const [icao24, lat1, lon1, lat2, lon2] = flight;\n      if (!Number.isFinite(lat1) || !Number.isFinite(lon1) || !Number.isFinite(lat2) || !Number.isFinite(lon2)) {\n        return;\n      }\n  \n      // Periksa apakah koordinat penerbangan berada dalam kotak pembatas\n      if (\n        (lat1 >= bbox.south && lat1 <= bbox.north && lon1 >= bbox.west && lon1 <= bbox.east) ||\n        (lat2 >= bbox.south && lat2 <= bbox.north && lon2 >= bbox.west && lon2 <= bbox.east)\n      ) {\n        const polyline = L.polyline([[lat1, lon1], [lat2, lon2]], { color: 'blue' });\n        polylines.push(polyline);\n      }\n    });\n  \n    const decorator = L.polylineDecorator(polylines, {\n      patterns: [\n        {\n          offset: '50%',\n          symbol: L.Symbol.arrowHead({\n            pixelSize: 10,\n            polygon: false,\n            pathOptions: { color: 'blue' },\n          }),\n        },\n      ],\n    });\n  \n    decorator.addTo(this.map);\n  };\n\n  animateFlights = () => {\n    const context = this.map._renderer._container.getContext('2d');\n    const vectorContext = L.canvas({ padding: 0 });\n  \n    // Clear the canvas\n    context.clearRect(0, 0, this.map._renderer._container.width, this.map._renderer._container.height);\n  \n    const bbox = this.getBoundingBox(); // Tambahkan deklarasi bbox di sini\n  \n    // Loop through flight data and animate flights\n    this.flightData.forEach((flight) => {\n      const [icao24, lat1, lon1, lat2, lon2] = flight;\n      if (!Number.isFinite(lat1) || !Number.isFinite(lon1) || !Number.isFinite(lat2) || !Number.isFinite(lon2)) {\n        return;\n      }\n  \n      // Check if the flight coordinates are within the bounding box\n      if (\n        (lat1 >= bbox.south && lat1 <= bbox.north && lon1 >= bbox.west && lon1 <= bbox.east) ||\n        (lat2 >= bbox.south && lat2 <= bbox.north && lon2 >= bbox.west && lon2 <= bbox.east)\n      ) {\n        // Get the projected coordinates\n        const p1 = this.map.latLngToLayerPoint([lat1, lon1]);\n        const p2 = this.map.latLngToLayerPoint([lat2, lon2]);\n  \n        // Calculate the animation progress\n        const progress = (Date.now() % 10000) / 10000;\n  \n        // Calculate the current position\n        const x = p1.x + (p2.x - p1.x) * progress;\n        const y = p1.y + (p2.y - p1.y) * progress;\n  \n        // Draw the airplane icon at the current position\n        vectorContext.clearRect(0, 0, this.map._renderer._container.width, this.map._renderer._container.height);\n        vectorContext.drawImage(this.airplaneIcon._image, x, y, 32, 32);\n  \n        // Render the vector layer\n        this.map._renderer._renderPath(vectorContext);\n      }\n    });\n  };\n\n  render() {\n    const { bboxCoordinates } = this.state;\n\n    return (\n      <div className=\"map-container\">\n        <div ref={this.mapRef} className=\"map\" />\n        <div className=\"bbox-coordinates\">\n          {bboxCoordinates.length > 0 && (\n            <React.Fragment>\n              <span>Bbox Coordinates:</span>\n              {bboxCoordinates.map((coord, index) => (\n                <span key={index}>\n                  [{coord[0].toFixed(2)}, {coord[1].toFixed(2)}]\n                </span>\n              ))}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MapComponent2;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}