{"ast":null,"code":"var _jsxFileName = \"/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/Map.js\";\nimport React, { Component } from 'react';\nimport 'ol/ol.css';\nimport './Map.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport { Stroke, Style, Icon } from 'ol/style.js';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer.js';\nimport OSM from 'ol/source/OSM.js'; // Import OSM source\nimport VectorSource from 'ol/source/Vector.js';\nimport Feature from 'ol/Feature.js';\nimport LineString from 'ol/geom/LineString.js';\nimport { getVectorContext } from 'ol/render.js';\nimport { getWidth } from 'ol/extent.js';\nimport airplaneimg from './614.png';\nconst tileLayer = new TileLayer({\n  source: new OSM() // Use OSM source\n});\n\nconst map = new Map({\n  layers: [tileLayer],\n  target: 'map',\n  // Update target to match the ID of the HTML element\n  view: new View({\n    center: [-11000000, 4600000],\n    zoom: 2\n  })\n});\nconst airplaneIcon = new Icon({\n  src: airplaneimg,\n  // Use the imported image file\n  scale: 0.5 // Scale the size of the icon if needed\n});\n\nconst style = new Style({\n  stroke: new Stroke({\n    color: 'red',\n    width: 2\n  }),\n  image: airplaneIcon // Set the airplane icon as the symbol\n});\n\nconst flightsSource = new VectorSource({\n  attributions: 'Flight data by ' + '<a href=\"https://openflights.org/data.html\">OpenFlights</a>,',\n  loader: function () {\n    const url = '/data/openflights/flights.json'; // Update the URL\n    fetch(url).then(function (response) {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(function (json) {\n      const flightsData = json.flights;\n      for (let i = 0; i < flightsData.length; i++) {\n        const flight = flightsData[i];\n        const from = flight[0];\n        const to = flight[1];\n        const line = new LineString([from, to]);\n        line.transform('EPSG:4326', 'EPSG:3857');\n        const feature = new Feature({\n          geometry: line,\n          finished: false\n        });\n        addLater(feature, i * 50);\n      }\n      tileLayer.on('postrender', animateFlights);\n    }).catch(function (error) {\n      console.error('Error fetching JSON:', error);\n      console.error('URL:', url);\n    });\n  }\n});\nconst flightsLayer = new VectorLayer({\n  source: flightsSource,\n  style: function (feature) {\n    if (feature.get('finished')) {\n      return style;\n    }\n    return null;\n  }\n});\nmap.addLayer(flightsLayer);\nconst pointsPerMs = 0.02;\nfunction animateFlights(event) {\n  const vectorContext = getVectorContext(event);\n  const frameState = event.frameState;\n  vectorContext.setStyle(style);\n  const features = flightsSource.getFeatures();\n  for (let i = 0; i < features.length; i++) {\n    const feature = features[i];\n    if (!feature.get('finished')) {\n      const coords = feature.getGeometry().getCoordinates();\n      const elapsedTime = frameState.time - feature.get('start');\n      if (elapsedTime >= 0) {\n        const elapsedPoints = elapsedTime * pointsPerMs;\n        if (elapsedPoints >= coords.length) {\n          feature.set('finished', true);\n        }\n        const maxIndex = Math.min(elapsedPoints, coords.length);\n        const currentLine = new LineString(coords.slice(0, maxIndex));\n        const worldWidth = getWidth(map.getView().getProjection().getExtent());\n        const offset = Math.floor(map.getView().getCenter()[0] / worldWidth);\n        currentLine.translate(offset * worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n        currentLine.translate(worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n      }\n    }\n  }\n  map.render();\n}\nfunction addLater(feature, timeout) {\n  window.setTimeout(function () {\n    let start = Date.now();\n    feature.set('start', start);\n    flightsSource.addFeature(feature);\n    const duration = (feature.getGeometry().getCoordinates().length - 1) / pointsPerMs;\n    start += duration;\n  }, timeout);\n}\nclass MapComponent extends Component {\n  componentDidMount() {\n    map.setTarget(this.mapRef);\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref => this.mapRef = ref,\n      id: \"map\",\n      className: \"map\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 12\n      }\n    });\n  }\n}\nexport default MapComponent;","map":{"version":3,"names":["React","Component","Map","View","Stroke","Style","Icon","Tile","TileLayer","Vector","VectorLayer","OSM","VectorSource","Feature","LineString","getVectorContext","getWidth","airplaneimg","tileLayer","source","map","layers","target","view","center","zoom","airplaneIcon","src","scale","style","stroke","color","width","image","flightsSource","attributions","loader","url","fetch","then","response","ok","Error","json","flightsData","flights","i","length","flight","from","to","line","transform","feature","geometry","finished","addLater","on","animateFlights","catch","error","console","flightsLayer","get","addLayer","pointsPerMs","event","vectorContext","frameState","setStyle","features","getFeatures","coords","getGeometry","getCoordinates","elapsedTime","time","elapsedPoints","set","maxIndex","Math","min","currentLine","slice","worldWidth","getView","getProjection","getExtent","offset","floor","getCenter","translate","drawGeometry","render","timeout","window","setTimeout","start","Date","now","addFeature","duration","MapComponent","componentDidMount","setTarget","mapRef","createElement","ref","id","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/mariovicky/Skripsi_OpenLayers/src/containers/Map/Map.js"],"sourcesContent":["import React, { Component } from 'react';\nimport 'ol/ol.css';\nimport './Map.css';\nimport Map from 'ol/Map.js';\nimport View from 'ol/View.js';\nimport { Stroke, Style, Icon } from 'ol/style.js';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer.js';\nimport OSM from 'ol/source/OSM.js'; // Import OSM source\nimport VectorSource from 'ol/source/Vector.js';\nimport Feature from 'ol/Feature.js';\nimport LineString from 'ol/geom/LineString.js';\nimport { getVectorContext } from 'ol/render.js';\nimport { getWidth } from 'ol/extent.js';\nimport airplaneimg from './614.png';\n\nconst tileLayer = new TileLayer({\n  source: new OSM(), // Use OSM source\n});\n\nconst map = new Map({\n  layers: [tileLayer],\n  target: 'map', // Update target to match the ID of the HTML element\n  view: new View({\n    center: [-11000000, 4600000],\n    zoom: 2,\n  }),\n});\n\nconst airplaneIcon = new Icon({\n  src: airplaneimg, // Use the imported image file\n  scale: 0.5, // Scale the size of the icon if needed\n});\n\nconst style = new Style({\n  stroke: new Stroke({\n    color: 'red',\n    width: 2,\n  }),\n  image: airplaneIcon, // Set the airplane icon as the symbol\n});\n\nconst flightsSource = new VectorSource({\n  attributions:\n    'Flight data by ' +\n    '<a href=\"https://openflights.org/data.html\">OpenFlights</a>,',\n  loader: function () {\n    const url = '/data/openflights/flights.json'; // Update the URL\n    fetch(url)\n      .then(function (response) {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json();\n      })\n      .then(function (json) {\n        const flightsData = json.flights;\n        for (let i = 0; i < flightsData.length; i++) {\n          const flight = flightsData[i];\n          const from = flight[0];\n          const to = flight[1];\n\n          const line = new LineString([from, to]);\n          line.transform('EPSG:4326', 'EPSG:3857');\n\n          const feature = new Feature({\n            geometry: line,\n            finished: false,\n          });\n\n          addLater(feature, i * 50);\n        }\n\n        tileLayer.on('postrender', animateFlights);\n      })\n      .catch(function (error) {\n        console.error('Error fetching JSON:', error);\n        console.error('URL:', url);\n      });\n  },\n});\n\nconst flightsLayer = new VectorLayer({\n  source: flightsSource,\n  style: function (feature) {\n    if (feature.get('finished')) {\n      return style;\n    }\n    return null;\n  },\n});\n\nmap.addLayer(flightsLayer);\n\nconst pointsPerMs = 0.02;\nfunction animateFlights(event) {\n  const vectorContext = getVectorContext(event);\n  const frameState = event.frameState;\n  vectorContext.setStyle(style);\n\n  const features = flightsSource.getFeatures();\n  for (let i = 0; i < features.length; i++) {\n    const feature = features[i];\n    if (!feature.get('finished')) {\n      const coords = feature.getGeometry().getCoordinates();\n      const elapsedTime = frameState.time - feature.get('start');\n      if (elapsedTime >= 0) {\n        const elapsedPoints = elapsedTime * pointsPerMs;\n\n        if (elapsedPoints >= coords.length) {\n          feature.set('finished', true);\n        }\n\n        const maxIndex = Math.min(elapsedPoints, coords.length);\n        const currentLine = new LineString(coords.slice(0, maxIndex));\n\n        const worldWidth = getWidth(map.getView().getProjection().getExtent());\n        const offset = Math.floor(map.getView().getCenter()[0] / worldWidth);\n\n        currentLine.translate(offset * worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n        currentLine.translate(worldWidth, 0);\n        vectorContext.drawGeometry(currentLine);\n      }\n    }\n  }\n\n  map.render();\n}\n\nfunction addLater(feature, timeout) {\n  window.setTimeout(function () {\n    let start = Date.now();\n    feature.set('start', start);\n    flightsSource.addFeature(feature);\n    const duration =\n      (feature.getGeometry().getCoordinates().length - 1) / pointsPerMs;\n    start += duration;\n  }, timeout);\n}\n\nclass MapComponent extends Component {\n  componentDidMount() {\n    map.setTarget(this.mapRef);\n  }\n\n  render() {\n    return <div ref={(ref) => (this.mapRef = ref)} id=\"map\" className=\"map\" />;\n  }\n}\n\nexport default MapComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}